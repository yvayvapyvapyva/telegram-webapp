<button onclick="startAutoSpeak()">Начать озвучивание</button>

<script>
let intervalId;

function startAutoSpeak() {
    if (!navigator.geolocation) {
        alert("Геолокация не поддерживается браузером");
        return;
    }

    // Запрашиваем первую позицию и разрешение
    navigator.geolocation.getCurrentPosition(position => {
        speakPosition(position);
    });

    // Каждые 5 секунд
    intervalId = setInterval(() => {
        navigator.geolocation.getCurrentPosition(position => {
            speakPosition(position);
        });
    }, 15000);
}

function speakPosition(position) {
    const lat = position.coords.latitude.toFixed(5);
    const lon = position.coords.longitude.toFixed(5);
    const message = `координаты: ${lat}, долгота ${lon}`;

    const utterance = new SpeechSynthesisUtterance(message);
    speechSynthesis.speak(utterance);
}
</script>
